<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Student Information</title>
</head>
<body>
<div id="header">
    <a class="btn" href="../../../admin_home">Home</a>
    <a class="btn" href="/logout" style="float: right">Log out</a>
</div>
<h2 th:text="${student.fullname}"></h2>
<p th:text="@{Username: {uname}(uname=${student.user.username})}" id="uname"></p>
<div>
    <button onclick="edit(this)">Edit Student Information</button>
    <button onclick="edit_login(this)">Edit Log In Information</button>
    <button onclick="delete_confirm()">Delete Student Account</button>
</div>
<div>
    <p>Groups:</p>
    <div th:each="group: ${student.groups}">
        <span th:text="${group.name}"></span>
        <a th:href="@{./remove_from/{id}(id=${group.id})}">[Remove from group]</a>
    </div>
</div>

<script th:inline="javascript">

    function edit_login(e) {
        e.hidden = true;
        document.getElementById("uname").hidden = true;
        var f = document.createElement("FORM");
        f.setAttribute("method", "post");
        f.setAttribute("action", "./edit_login");
        var inpUN = document.createElement("INPUT");
        inpUN.setAttribute("type", "text");
        inpUN.setAttribute("name", "username");
        inpUN.setAttribute("placeholder", "Enter New Username");
        inpUN.setAttribute("id", "username");
        var fullUname = [[${student.user.username}]];
        inpUN.setAttribute("value", fullUname.substr(0, fullUname.lastIndexOf("_")));
        var labelUN = document.createElement("LABEL");
        labelUN.setAttribute("for", "username");
        labelUN.innerText = "Username: ";
        var inpPSWD = document.createElement("INPUT");
        inpPSWD.setAttribute("type", "password");
        inpPSWD.setAttribute("name", "pswd");
        inpPSWD.setAttribute("placeholder", "Enter New Password");
        inpPSWD.setAttribute("id", "pswd");
        var labelPSWD = document.createElement("LABEL");
        labelPSWD.setAttribute("for", "pswd");
        labelPSWD.innerText = "New Password: ";
        var inpPSWD2 = document.createElement("INPUT");
        inpPSWD2.setAttribute("type", "password");
        inpPSWD2.setAttribute("name", "pswd2");
        inpPSWD2.setAttribute("placeholder", "Repeat New Password");
        inpPSWD2.setAttribute("id", "pswd2");
        var labelPSWD2 = document.createElement("LABEL");
        labelPSWD2.setAttribute("for", "pswd2");
        labelPSWD2.innerText = "Confirm Password: ";
        var btn = document.createElement("BUTTON");
        btn.setAttribute("type", "f");
        btn.innerText = "Save";
        f.append(labelUN);
        f.append(inpUN);
        f.append(document.createElement("BR"));
        f.append(labelPSWD);
        f.append(inpPSWD);
        f.append(labelPSWD2);
        f.append(inpPSWD2);
        f.append(document.createElement("BR"));
        f.append(btn);
        e.parentNode.append(f);
    }

    function edit(e) {
        e.hidden = true;
        var f = document.createElement("FORM");
        f.setAttribute("method", "post");
        f.setAttribute("action", "./edit_info");
        var inpFN = document.createElement("INPUT");
        inpFN.setAttribute("type", "text");
        inpFN.setAttribute("name", "firstname");
        inpFN.setAttribute("placeholder", "Enter First Name");
        inpFN.setAttribute("id", "firstname");
        inpFN.setAttribute("value", [[${student.first_name}]]);
        var labelFN = document.createElement("LABEL");
        labelFN.setAttribute("for", "firstname");
        labelFN.innerText = "First Name: ";
        var inpLN = document.createElement("INPUT");
        inpLN.setAttribute("type", "text");
        inpLN.setAttribute("name", "lastname");
        inpLN.setAttribute("placeholder", "Enter Last Name");
        inpLN.setAttribute("id", "lastname");
        inpLN.setAttribute("value", [[${student.last_name}]]);
        var labelLN = document.createElement("LABEL");
        labelLN.setAttribute("for", "lastname");
        labelLN.innerText = "Last Name: ";
        var btn = document.createElement("BUTTON");
        btn.setAttribute("type", "f");
        btn.innerText = "Save";
        f.append(labelFN);
        f.append(inpFN);
        f.append(document.createElement("BR"));
        f.append(labelLN);
        f.append(inpLN);
        f.append(document.createElement("BR"));
        f.append(btn);
        e.parentNode.append(f);
    }

    function delete_confirm() {
        if (confirm('Are you sure you want to delete this student account?')) {
            window.location.href = './delete';
        }
    }
</script>

</body>
</html>